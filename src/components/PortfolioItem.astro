---
import Prose from "./Prose.astro"
import { render, type CollectionEntry } from "astro:content";
import Globe from "../assets/globe.svg";
import GitHub from "../assets/github.svg";

interface Props {
    project: CollectionEntry<"projects">
    class?: string
}

const { project, class: className, ...rest } = Astro.props;

const { Content }  = await render(project);
---

<style>
    @reference "#global.css";

    .portfolio-item :global(img) {
        @variant sm {
            float: right;
            width: 50%;
            margin: 0 0 1rem 1rem;
        }
    }
    .portfolio-item.alternate-image :global(img) {
        @variant sm {
            float: left;
            margin: 0 1rem 1rem 0;
        }
    }

    h2 svg {
        display: inline-block;
    }
</style>

<article class=`portfolio-item ${className}` {...rest}>
    <Prose>
        <header class="flex flew-row gap-2 flex-wrap">
            <h2 class="m-0! inline">
                {project.data.name}
            </h2>
            <div class="mt-1 self-center flex flex-row gap-1 not-prose">
                {project.data.repo &&
                    <a href={project.data.repo} aria-label="GitHub">
                        <GitHub aria-hidden="true" />
                    </a>
                }

                {project.data.website &&
                    <a href={project.data.website} aria-label="Website">
                        <Globe aria-hidden="true" />
                    </a>
                }
            </div>
        </header>
        <Content />
    </Prose>
</article>
